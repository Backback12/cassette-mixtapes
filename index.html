<!DOCTYPE html>
<html lang="en">
<head>
    <title>Cassettify</title>
    <meta charset="UTF-8">
    <meta name="description" content="Make your Spotify Top Tracks Cassette Mixtake">
    <meta name="keywords" content="Spotify, API, Cassette, Mixtape">
    <meta name="author" content="Connor Pagtakhan">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="img/favicon.png">

    
    <!-- Import Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.6/underscore-min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="config.js"></script>

    <!-- Import Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="preload" href="styles.css" as="style" />
    <link href="styles.css" rel="stylesheet">
    
    
</head>
<body>

<!-- Top Navbar -->
<!-- <nav class="navbar navbar-dark navbar-expand-sm bg-dark nav-fill" style="padding: 8px 16px"> -->
<nav class="navbar navbar-expand-sm" style="padding: 8px 16px">
    <!-- <a class="navbar-brand" style="padding: 8px 16px;" href="javascript:document.location = window.location.href.split('#')[0];">Top Tracks</a> -->
    <a class="navbar-brand" style="padding: 8px 16px;" href=".">Cassettify</a>

    <div class="collapse navbar-collapse nav-fill"></div>

    <a class="navbar-item" href="https://www.spotify.com/" target="_blank" style="padding: 8px 16px;">
        <img src="img/Spotify_Logo_RGB_Green.png" width="100" height="30" alt="Spotify-Logo">
    </a>
</nav>





<div class="row-featurette container">

    <!-- Authentication Error Alert -->
    <div class="container" style="padding: 20px;">
        <div id='access_denied' class="alert alert-danger" style="padding: 20px; display: none;">
            <strong>Error!</strong> Please allow authentication.
        </div>
    </div>
    <!-- Authentication Error Alert -->
    <div class="container" style="padding: 20px;">
        <div id='invalid_token' class="alert alert-danger alert-dismissible" style="padding: 20px; display: none;" role="alert">
            <strong>Error!</strong> Invalid access token, please log in again.
        </div>
    </div>


    <!-- Title Divider -->
    <div class="container row featurette text-center" style="width: 100vw; height: 50vh;">
        <!-- <p><div><h1 style="font-size: 60px;"><b>Top Tracks</b></h1></p>
        <p><button class="btn btn-primary btn-outline-light hide-me" onclick="authorizeUser()" style="padding:8px 60px; background-color: #1db954;">Log in with Spotify</button></p>
        </div> -->
        <div class="align-self-center">
            <h1 style="font-size: 60px; padding: 10px 10px;"><b>Make Your Cassette Mixtape</b></h1>
            <button class="btn btn-outline-light login-button" id="auth">
                Log in with Spotify
            </button>
        </div>
    </div>

    <!-- <hr class="featurette-dividor"></hr> -->
    
    <div class="accordion" id="information">
        
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    About
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#information">
                <div class="accordion-body">
                    This site is a project I made for fun
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    FAQs
                </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#information">
              <div class="accordion-body">
                <h4>What data do you access?</h4>
                This app accesses your top listening activity.
                By default, any usage of Spotify's API also includes your name, username, and other data that is already publicly available.
                <h4>Do you steal data?</h4>
                No, I don't even know how to do that
                <h4>Does this app monitor me outside this page?</h4>
                No, I don't know how to do that either.
                <b>Cassettify</b> can only access your data when you give access and when you're on this site.
                <h4>How can I remove this app access?</h4>
                You can remove access to this and other apps by going to your
                <a href="https://www.spotify.com/us/account/apps/" target="_blank">Spotify Account Settings</a>
            and clicking "Remove Access" for <b>Cassettify</b>.
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Privacy Policy
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#information">
                <div class="accordion-body">
                    <h4>Information Collection</h4>
                    <b>Cassettify</b> does not collect any personally identifiable information from visitors to this website.
                    We do not use cookies or other tracking technologies to gather any data about ours users.
                    <h4>Information Usage</h4>
                    We do not use or share any data with third parties.

                    <h4>Contact Me</h4>
                    If you have any questions about this privacy policy, or anything about this site, please contact me at <a href = "mailto: cepagtakhan@yahoo.ca">cepagtakhan@yahoo.ca</a>
                </div>
            </div>
        </div>
    </div>
    
</div>



<hr class="featurette-dividor"></hr>

<footer class="py-3 my-4">
    <!-- <ul class="nav justify-content-center pb-3 mb-3">
      <li class="nav-item"><a href="." class="nav-link px-2 text-muted">Home</a></li>
      <li class="nav-item"><a href="about.html" class="nav-link px-2 text-muted">About/FAQs</a></li>
      <li class="nav-item"><a href="privacy.html" class="nav-link px-2 text-muted">Privacy Policy</a></li>
    </ul> -->
    <p class='text-center text-muted'>Project made by 
        <a href = "mailto: cepagtakhan@yahoo.ca">Connor Pagtakhan</a>
    </p>
</footer>


<script>
"use strict";

function authorizeUser() {
    var scopes = ['user-top-read'];
    var url = 'https://accounts.spotify.com/authorize?client_id=' + SPOTIFY_CLIENT_ID +
        '&response_type=token' +
        '&scope=' + encodeURIComponent(scopes) +
        '&redirect_uri=' + encodeURIComponent(SPOTIFY_REDIRECT_URI) +
        '&show_dialog=true';
    document.location = url;
}

/*
 * parseArgs()
 * Reads hashes (#)  or searches (?) in the url
 */
function parseArgs() {
    var hash = location.hash.length == 0 ? location.search.replace('?', '') : location.hash.replace('#', '');
    var all = hash.split('&');
    var args = {};
    _.each(all, function(keyvalue) {
        var kv = keyvalue.split('=');
        var key = kv[0];
        var val = kv[1];
        args[key] = val;
    });
    return args;
}


$(document).ready(function() {
    var args = parseArgs();
    if ('error' in args) {
        // Error in user authorization
        // alert("Error in getting Spotify authorization");
        if (args['error'] == "access_denied") {
          document.getElementById('access_denied').style.display = 'block';
        }
        else if (args['error'] == "invalid_token") {
          document.getElementById('invalid_token').style.display = 'block';
        }
    }
    else if ('access_token' in args) {
        // User is authorized, continue to next page
        window.location = 'generate' + window.location.hash;
    }
    else {
        // user is not authenticated, open default page
    }

    $("#auth").click(function() {
      authorizeUser();
    })
});
</script>
</body>
</html>